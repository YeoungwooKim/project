<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="project.project.mapper.BoardMapper">
	<select id="selectBoardList" resultType="project.project.dto.BoardDto">
		<![CDATA[
			SELECT
				board_idx,
				title,
				hit_cnt,
				creator_id,
				DATE_FORMAT(created_date, '%Y.%m.%d %H:%i:%s') AS created_date
			FROM
				board
			WHERE
				deleted_yn = 'N'
			ORDER BY board_idx DESC
		]]>
	</select>
	
	<insert id="insertBoardList" parameterType="project.project.dto.BoardDto" useGeneratedKeys="true" keyProperty="boardIdx">
		<![CDATA[
			INSERT INTO board
				(title, contents, created_date, creator_id)
			VALUES
				(
					#{title},
					#{contents},
					NOW(),
					'TESTER'
				)			
		]]>	
	</insert>
	
	<select id="searchBoard" parameterType="int" resultType="project.project.dto.BoardDto">
		<![CDATA[
			SELECT
				board_idx,
				title,
				contents,
				hit_cnt,
				creator_id,
				DATE_FORMAT(created_date, '%Y.%m.%d %H:%i:%s') AS created_date,				
				DATE_FORMAT(updated_date, '%Y.%m.%d %H:%i:%s') AS updated_date
			FROM
				board
			WHERE
				deleted_yn = 'N'
				AND
				board_idx = #{boardIdx}
			ORDER BY board_idx DESC
		]]>
	</select>
	
	 <!-- modifyBoardList(BoardDto board, int intValue) -->
	<update id="modifyBoardList">
		<![CDATA[
			UPDATE board SET
				title = #{board.title},
				contents = #{board.contents},
				updated_date = NOW()
			WHERE
				board_idx = #{boardIdx}
		]]>
	</update>
	
	<update id="delete">
		<![CDATA[
			UPDATE board
				set deleted_yn='Y'
			WHERE
				board_idx=#{boardIdx}
		]]>
	</update>
</mapper>